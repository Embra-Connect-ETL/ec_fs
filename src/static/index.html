<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:image:width" content="400" />
    <meta property="og:image:height" content="300" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Connect IDE | Integrated Development Environment" />
    <meta property="og:description" content="Embra Connect's Integrated Development Environment" />
    <meta property="og:url" content="https://www.embraconnect.com" />
    <meta property="og:image" content="https://www.embraconnect.com/assets/png/color_logo_no_bg.png" />
    <link rel="manifest" href="./assets/icons/site.webmanifest">
    <link rel="shortcut icon" href="./assets/icons/favicon.ico" type="image/x-icon">

    <title>Connect IDE | Embra Connect</title>
    <!-- Ionicons CDN -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <!-- CodeMirror (CSS) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css" />

    <!-- CodeMirror (Themes) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/neat.min.css"
        integrity="sha512-yySSMHK1wb+xdn5GRRSXY6KQMMMyBS4jGB5bKms2Gu2U9mGQnk4zUavraMI/Cc0h19kYNPlQYkqK6pVXM4O56Q=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/xq-light.min.css"
        integrity="sha512-GKc0rRW0tbrkkWJpSugASKdO9KFVJ2IQjFmkNo9Vr0F+HWIicZZkQpE3v954AIh7GJy8Rn8n4Oa8qAl8TKleeA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/panda-syntax.min.css"
        integrity="sha512-WQSsk4AVPx4XqVc20h0cuPXo80671aMz/WJVU6pkhP8A/R69nvsyDoGtcGP87GswQfwQxIaDwJfE3m1aw1qvwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/neo.min.css"
        integrity="sha512-n6DpN0Uo6L9yIU4MeX5hhnCX6NejvEBxXQ2GNmBl8febWyt1Fdh7C4EiDQvBeGtFOaOIBxZAf/VQZjjUvs04ng=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- CodeMirror (JavaScript) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>

    <!-- CodeMirror (Syntax Highlighting) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/sql/sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/htmlmixed/htmlmixed.min.js"></script>
    <!-- Toastify -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script src="./constants.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <!-- SIde Bar -->
    <div id="sidebar">
        <div class="logo-wrapper">
            <img class="logo" src="./assets/logos/ec_connect_logo.png" alt="logo">
            Connect IDE
        </div>
        <div id="sidebar-actions">
            <h2>File Browser</h2>

            <button id="new-file" title="Create a new file">
                <ion-icon class="sidebar-action-icon" name="document"></ion-icon>
            </button>

            <button id="new-folder" title="Create a new folder">
                <ion-icon class="sidebar-action-icon" name="folder"></ion-icon>
            </button>

            <button id="refresh" title="Update file tree">
                <ion-icon class="sidebar-action-icon" name="refresh"></ion-icon>
            </button>
        </div>

        <div id="file-tree"></div>
    </div>

    <!-- Editor Container -->
    <div id="editor-container">
        <div id="toolbar">
            <button id="save" title="Save changes">
                <ion-icon class="toolbar-icon" name="save"></ion-icon>
            </button>

            <button id="delete" title="Delete selected item">
                <ion-icon class="toolbar-icon" name="trash-bin"></ion-icon>
            </button>

            <button id="rename" title="Rename selected item">
                <ion-icon class="toolbar-icon" name="pencil"></ion-icon>
            </button>
            <span id="current-path"></span>
        </div>
        <textarea id="editor"></textarea>
    </div>

    <!-- Execution panel -->
    <div id="execution-panel">
        <div id="execution-header" onclick="toggleExecutionPanel()">
            <span class="execution-panel-title">Command Execution Panel</span>
            <ion-icon id="execution-toggle-icon" name="chevron-down-outline"></ion-icon>
        </div>

        <div id="execution-body">
            <div class="btn-wrapper">
                <button onclick="submitSQLToJobAPI()">Run SQL</button>
                <button id="view-jobs-btn">View All Jobs</button>
                <button id="clear-history-btn" onclick="clearJobHistory()">Clear History</button>
            </div>

            <div id="execution-status"></div>
            <h4 class="recent-jobs-title">Recent Jobs</h4>
            <ul id="job-history"></ul>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal-overlay">
        <div id="modal">
            <h3 id="modal-title"></h3>
            <input id="modal-input" type="text" spellcheck="false" />
            <div id="modal-buttons">
                <button id="modal-cancel">Cancel</button>
                <button id="modal-ok">OK</button>
            </div>
        </div>
    </div>

    <!-- Job History Modal -->
    <div id="job-history-modal" class="modal hidden">
        <div class="modal-content">
            <h3>All Jobs</h3>
            <button class="close-modal" onclick="closeModal('job-history-modal')">X</button>
            <div id="job-list-container" class="scrollable"></div>
        </div>
    </div>

    <!-- Job Detail Modal -->
    <div id="job-detail-modal" class="job-detail-modal hidden">
        <div class="modal-content">
            <h3>Job Details</h3>
            <button class="close-modal" onclick="closeModal('job-detail-modal')">X</button>
            <div id="job-detail-content"></div>
        </div>
    </div>

    <script src="./script.js"></script>
    <script src="./execution.js"></script>
</body>

</html>